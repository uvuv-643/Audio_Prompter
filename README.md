# Audio Prompter - Сервер-Клиент Система

Модульная система для автоматического создания скриншотов с централизованным управлением через сервер.

## Архитектура

### Сервер (server/)

- Центральный сервер управления на Ubuntu
- WebSocket соединения с клиентами
- Планировщик задач каждые 15 секунд
- Автоматический запуск через systemd

### Клиент (client/)

- Автономный режим (main.py) - локальный планировщик
- Клиент-серверный режим (client.py) - управление через сервер
- Поддержка множественных клиентов

## Быстрый старт

### 1. Развертывание сервера на Ubuntu

```bash
# Скопируйте deploy.sh на сервер и выполните:
sudo ./deploy.sh
```

### 2. Запуск клиента

```bash
# Автономный режим
cd client
python main.py

# Клиент-серверный режим
cd client
python client.py --host SERVER_IP --port 8765
```

## Установка

### Сервер

```bash
cd server
pip install -r requirements.txt
python server.py
```

### Клиент

```bash
cd client
pip install -r requirements.txt
```

## Управление сервером

```bash
# Статус
sudo systemctl status screenshot-server

# Логи
sudo journalctl -u screenshot-server -f

# Перезапуск
sudo systemctl restart screenshot-server

# Остановка
sudo systemctl stop screenshot-server
```

## Функциональность

- Клик мыши в текущей позиции курсора
- Захват области 100x40 пикселей
- OCR распознавание тайминга (HH:MM:SS)
- Сохранение скриншотов с таймстемпом
- Централизованное управление через сервер
- Поддержка множественных клиентов
- Автоматическое переподключение клиентов

## Протокол связи

WebSocket JSON сообщения:

### Сервер → Клиент

- `connection_established` - подтверждение подключения
- `execute_screenshot` - команда выполнить скриншот
- `heartbeat_ack` - подтверждение heartbeat

### Клиент → Сервер

- `screenshot_completed` - результат выполнения
- `screenshot_error` - ошибка выполнения
- `heartbeat` - проверка соединения

## Масштабирование

- Сервер поддерживает неограниченное количество клиентов
- Каждый клиент получает команды одновременно
- Автоматическое восстановление соединений
- Логирование всех операций

## Структура проекта

```
Audio_Prompter/
├── server/                 # Серверная часть
│   ├── server.py          # Основной сервер
│   ├── deploy.sh          # Скрипт развертывания
│   ├── systemd_service.py # Создание systemd сервиса
│   └── requirements.txt   # Зависимости сервера
├── client/                # Клиентская часть
│   ├── main.py           # Автономный режим
│   ├── client.py         # Клиент-серверный режим
│   ├── screenshot_workflow.py # Логика скриншотов
│   └── requirements.txt  # Зависимости клиента
└── README.md             # Основная документация
```
